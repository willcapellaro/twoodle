{"version":3,"file":"HTMLTextRenderData.mjs","sources":["../../../src/scene/text-html/HTMLTextRenderData.ts"],"sourcesContent":["/* eslint-disable no-restricted-globals */\nimport { DOMAdapter } from '../../environment/adapter';\nimport { type ImageLike } from '../../environment/ImageLike';\n\nimport type { CanvasAndContext } from '../../rendering/renderers/shared/texture/CanvasPool';\n\n/** @internal */\nconst nssvg = 'http://www.w3.org/2000/svg';\n/** @internal */\nconst nsxhtml = 'http://www.w3.org/1999/xhtml';\n\n/** @internal */\nexport class HTMLTextRenderData\n{\n    public svgRoot = document.createElementNS(nssvg, 'svg');\n    public foreignObject = document.createElementNS(nssvg, 'foreignObject');\n    public domElement = document.createElementNS(nsxhtml, 'div');\n    public styleElement = document.createElementNS(nsxhtml, 'style');\n    public image: ImageLike;\n    public canvasAndContext?: CanvasAndContext;\n\n    constructor()\n    {\n        const { foreignObject, svgRoot, styleElement, domElement } = this;\n        // Arbitrary max size\n\n        foreignObject.setAttribute('width', '10000');\n        foreignObject.setAttribute('height', '10000');\n        foreignObject.style.overflow = 'hidden';\n\n        svgRoot.appendChild(foreignObject);\n\n        foreignObject.appendChild(styleElement);\n        foreignObject.appendChild(domElement);\n\n        this.image = DOMAdapter.get().createImage();\n    }\n\n    public destroy(): void\n    {\n        this.svgRoot.remove();\n        this.foreignObject.remove();\n        this.styleElement.remove();\n        this.domElement.remove();\n        this.image.src = '';\n        this.image.remove();\n\n        this.svgRoot = null;\n        this.foreignObject = null;\n        this.styleElement = null;\n        this.domElement = null;\n        this.image = null;\n        this.canvasAndContext = null;\n    }\n}\n"],"names":[],"mappings":";;;AAOA,MAAM,KAAQ,GAAA,4BAAA,CAAA;AAEd,MAAM,OAAU,GAAA,8BAAA,CAAA;AAGT,MAAM,kBACb,CAAA;AAAA,EAQI,WACA,GAAA;AARA,IAAA,IAAA,CAAO,OAAU,GAAA,QAAA,CAAS,eAAgB,CAAA,KAAA,EAAO,KAAK,CAAA,CAAA;AACtD,IAAA,IAAA,CAAO,aAAgB,GAAA,QAAA,CAAS,eAAgB,CAAA,KAAA,EAAO,eAAe,CAAA,CAAA;AACtE,IAAA,IAAA,CAAO,UAAa,GAAA,QAAA,CAAS,eAAgB,CAAA,OAAA,EAAS,KAAK,CAAA,CAAA;AAC3D,IAAA,IAAA,CAAO,YAAe,GAAA,QAAA,CAAS,eAAgB,CAAA,OAAA,EAAS,OAAO,CAAA,CAAA;AAM3D,IAAA,MAAM,EAAE,aAAA,EAAe,OAAS,EAAA,YAAA,EAAc,YAAe,GAAA,IAAA,CAAA;AAG7D,IAAc,aAAA,CAAA,YAAA,CAAa,SAAS,OAAO,CAAA,CAAA;AAC3C,IAAc,aAAA,CAAA,YAAA,CAAa,UAAU,OAAO,CAAA,CAAA;AAC5C,IAAA,aAAA,CAAc,MAAM,QAAW,GAAA,QAAA,CAAA;AAE/B,IAAA,OAAA,CAAQ,YAAY,aAAa,CAAA,CAAA;AAEjC,IAAA,aAAA,CAAc,YAAY,YAAY,CAAA,CAAA;AACtC,IAAA,aAAA,CAAc,YAAY,UAAU,CAAA,CAAA;AAEpC,IAAA,IAAA,CAAK,KAAQ,GAAA,UAAA,CAAW,GAAI,EAAA,CAAE,WAAY,EAAA,CAAA;AAAA,GAC9C;AAAA,EAEO,OACP,GAAA;AACI,IAAA,IAAA,CAAK,QAAQ,MAAO,EAAA,CAAA;AACpB,IAAA,IAAA,CAAK,cAAc,MAAO,EAAA,CAAA;AAC1B,IAAA,IAAA,CAAK,aAAa,MAAO,EAAA,CAAA;AACzB,IAAA,IAAA,CAAK,WAAW,MAAO,EAAA,CAAA;AACvB,IAAA,IAAA,CAAK,MAAM,GAAM,GAAA,EAAA,CAAA;AACjB,IAAA,IAAA,CAAK,MAAM,MAAO,EAAA,CAAA;AAElB,IAAA,IAAA,CAAK,OAAU,GAAA,IAAA,CAAA;AACf,IAAA,IAAA,CAAK,aAAgB,GAAA,IAAA,CAAA;AACrB,IAAA,IAAA,CAAK,YAAe,GAAA,IAAA,CAAA;AACpB,IAAA,IAAA,CAAK,UAAa,GAAA,IAAA,CAAA;AAClB,IAAA,IAAA,CAAK,KAAQ,GAAA,IAAA,CAAA;AACb,IAAA,IAAA,CAAK,gBAAmB,GAAA,IAAA,CAAA;AAAA,GAC5B;AACJ;;;;"}